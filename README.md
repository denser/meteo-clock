# ๐ฆ๏ธ ESP32-C6 MeteoClock

[![ESPHome](https://img.shields.io/badge/ESPHome-2026.2.1-blue.svg)](https://esphome.io)
[![Home Assistant](https://img.shields.io/badge/Home%20Assistant-Integration-orange.svg)](https://www.home-assistant.io)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

ะะพะปะฝะพัะตะฝะฝะฐั ะผะตัะตะพััะฐะฝัะธั ะฝะฐ ะฑะฐะทะต **ESP32-C6** ั ะดะธัะฟะปะตะตะผ, ััััะบะธะผะธ ะฑัะบะฒะฐะผะธ ะธ ะฟะพะปะฝะพะน ะธะฝัะตะณัะฐัะธะตะน ะฒ **Home Assistant**. ะัะพะตะบั ัะฒะปัะตััั ัะฐะทะฒะธัะธะตะผ ะธะดะตะน [AlexGyver MeteoClock](https://alexgyver.ru/meteoclock/) ะธ [Norovl](https://github.com/Norovl/meteoClock), ะฐะดะฐะฟัะธัะพะฒะฐะฝะฝัั ะฟะพะด ัะพะฒัะตะผะตะฝะฝะพะต ะถะตะปะตะทะพ ะธ ัะบะพัะธััะตะผั ัะผะฝะพะณะพ ะดะพะผะฐ.

---
<img width="1468" height="996" alt="image" src="https://github.com/user-attachments/assets/a29fa30a-7afd-4fc3-8ccf-332e858443c9" />

## โจ ะะพะทะผะพะถะฝะพััะธ

- ๐ **LCD 2004/1602** ั **ััััะบะธะผะธ ะฑัะบะฒะฐะผะธ** (ะฟะพะปัะทะพะฒะฐัะตะปััะบะธะต ัะธะผะฒะพะปั, ะบะฐะบ ะฒ ะพัะธะณะธะฝะฐะปัะฝะพะผ ะฟัะพะตะบัะต)
- ๐ก๏ธ **ะะฐััะธะบะธ**: BME280 (ัะตะผะฟะตัะฐัััะฐ, ะฒะปะฐะถะฝะพััั, ะดะฐะฒะปะตะฝะธะต) + MH-Z19 (COโ)
- ๐ก **ะคะพัะพัะตะทะธััะพั** ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ัะตะณัะปะธัะพะฒะบะธ ััะบะพััะธ ัะบัะฐะฝะฐ
- ๐จ **RGB ะธะฝะดะธะบะฐัะพั** ั ะฒัะฑะพัะพะผ ะธััะพัะฝะธะบะฐ:
  - **ะะฝะตัะฝะธะน** RGB ัะฒะตัะพะดะธะพะด (PWM)
  - **ะัััะพะตะฝะฝัะน** ะฒ ESP32-C6 ัะฒะตัะพะดะธะพะด (WS2812)
- ๐ **ะัะตะผั** ะฐะฒัะพะผะฐัะธัะตัะบะธ ัะธะฝััะพะฝะธะทะธััะตััั ั Home Assistant (ัะฐัะพะฒะพะน ะฟะพัั ะัะฐัะฝะพัััะบ, `Asia/Krasnoyarsk`)
- ๐ฎ **ะขัะธ ัะตะถะธะผะฐ ัะฐะฑะพัั ัะบัะฐะฝะฐ**:
  1. ะัะต ะฟะพะบะฐะทะฐะฝะธั (ัะตะผะฟะตัะฐัััะฐ, ะฒะปะฐะถะฝะพััั, ะดะฐะฒะปะตะฝะธะต, COโ, ะดะฐัะฐ, ะฒัะตะผั)
  2. ะััะฟะฝะพ ะฒัะตะผั (ัะฐัั, ะผะธะฝััั, ัะตะบัะฝะดั)
  3. ะััะฟะฝะพ COโ
- ๐ **ะฃะฟัะฐะฒะปะตะฝะธะต ะพะดะฝะพะน ะบะฝะพะฟะบะพะน** (ะฟะตัะตะบะปััะตะฝะธะต ัะตะถะธะผะพะฒ)
- ๐ฑ **ะะพะปะฝะฐั ะธะฝัะตะณัะฐัะธั ั Home Assistant** ัะตัะตะท ESPHome API
- โ๏ธ **ะัะต ะฝะฐัััะพะนะบะธ ะดะพัััะฟะฝั ะฒ HA** (ัะตะถะธะผ ัะบัะฐะฝะฐ, ััะบะพััั, ะธััะพัะฝะธะบ ะธะฝะดะธะบะฐัะพัะฐ)
- ๐พ **ะะฐัััะพะนะบะธ ัะพััะฐะฝััััั** ะฟะพัะปะต ะฟะตัะตะทะฐะณััะทะบะธ
- ๐ **OTA-ะพะฑะฝะพะฒะปะตะฝะธั** ะฟะพ ะฒะพะทะดััั
- ๐ถ **Captive portal** ะดะปั ะปะตะณะบะพะน ะฝะฐัััะพะนะบะธ WiFi

---

## ๐ฆ ะะพะผะฟะพะฝะตะฝัั

| ะะพะผะฟะพะฝะตะฝั | ะะฐะทะฝะฐัะตะฝะธะต | ะัะธะผะตัะฐะฝะธะต |
|-----------|------------|------------|
| **ESP32-C6-WROOM-1** | ะะปะฐะฒะฝัะน ะบะพะฝััะพะปะปะตั | ะัะฑะฐั ะฟะปะฐัะฐ ะฝะฐ C6 |
| **BME280** | ะขะตะผะฟะตัะฐัััะฐ, ะฒะปะฐะถะฝะพััั, ะดะฐะฒะปะตะฝะธะต | I2C, 3.3V |
| **MH-Z19** | COโ | UART, **5V** |
| **LCD 2004/1602 + I2C** | ะะธัะฟะปะตะน | ะะดัะตั 0x27 ะธะปะธ 0x3F |
| **ะคะพัะพัะตะทะธััะพั + 10ะบะะผ** | ะะฐััะธะบ ะพัะฒะตัะตะฝะฝะพััะธ | ะะตะปะธัะตะปั ะฝะฐะฟััะถะตะฝะธั |
| **RGB ัะฒะตัะพะดะธะพะด** (ะพะฟัะธะพะฝะฐะปัะฝะพ) | ะะฝะดะธะบะฐัะพั | ะะฑัะธะน ะบะฐัะพะด ะธะปะธ ะฐะฝะพะด |
| **ะขะฐะบัะพะฒะฐั ะบะฝะพะฟะบะฐ** | ะฃะฟัะฐะฒะปะตะฝะธะต | ะก ะฟะพะดััะถะบะพะน ะบ 3.3V |
| **ะะตะทะธััะพัั** | ะขะพะบะพะฒัะต ะพะณัะฐะฝะธัะธัะตะปะธ | 220 ะะผ ะดะปั RGB, 10ะบะะผ ะดะปั ัะพัะพัะตะทะธััะพัะฐ |
| **ะขัะฐะฝะทะธััะพั NPN** (BC547/2N2222) | ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะดัะฒะตัะบะพะน | ะะฟัะธะพะฝะฐะปัะฝะพ |

---

## ๐ ะกะพะพัะฒะตัััะฒะธะต ะฟะธะฝะพะฒ Arduino โ ESP32-C6

| ะฃัััะพะนััะฒะพ | Arduino | ESP32-C6 | ะัะธะผะตัะฐะฝะธะต |
|------------|---------|----------|------------|
| **ะะพะดัะฒะตัะบะฐ LCD** | `BACKLIGHT 10` | **GPIO20** | PWM ะฒััะพะด |
| **ะคะพัะพัะตะทะธััะพั** | `PHOTO A3` | **GPIO1** | ัะตะทะธััะพั ะฝะฐ GND |
| **MH-Z19 RX** | `MHZ_RX 2` | **GPIO4** | TX ะผะพะดัะปั โ RX ะดะฐััะธะบะฐ |
| **MH-Z19 TX** | `MHZ_TX 3` | **GPIO3** | RX ะผะพะดัะปั โ TX ะดะฐััะธะบะฐ |
| **RGB LED Red** | `LED_R 9` | **GPIO5** | PWM |
| **RGB LED Green** | `LED_G 6` | **GPIO18** | PWM |
| **RGB LED Blue** | `LED_B 5` | **GPIO19** | PWM |
| **ะะฑัะธะน ะฟะธะฝ RGB** | `LED_COM 7` | **GND / 3.3V** | ะ ะทะฐะฒะธัะธะผะพััะธ ะพั ัะธะฟะฐ LED |
| **ะะฝะพะฟะบะฐ** | `BTN_PIN 4` | **GPIO0** |  |
| **I2C SDA** | A4 | **GPIO6** | BME280 + LCD |
| **I2C SCL** | A5 | **GPIO7** | BME280 + LCD |

## ๐ ะกัะตะผะฐ ะฟะพะดะบะปััะตะฝะธั (Pinout)

### ESP32-C6-WROOM-1
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ESP32-C6-WROOM-1                     โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ GND   โโโโโดโโโ ะะฑัะธะน GND ะฒัะตั ััััะพะนััะฒ
โ 3.3V  โโโโโฌโโโ BME280 VCC
โ       โ   โโโโ ะะพะดััะถะบะฐ ะบะฝะพะฟะบะธ (10ะบฮฉ)
โ 5V    โโโโโฌโโโ MH-Z19 VCC
โ       โ   โโโโ LCD VCC (ัะตัะตะท I2C ะฐะดะฐะฟัะตั)
โโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  GPIO0โโโโ ะะฝะพะฟะบะฐ
โ  GPIO1โโโโ ะคะพัะพัะตะทะธััะพั (ADC) (ั ะฟะพะดััะถะบะพะน ะบ GND ัะตัะตะท 10ะบฮฉ)
โ  GPIO2โโโโ (ะทะฐัะตะทะตัะฒะธัะพะฒะฐะฝ)
โ  GPIO3โโโโ MH-Z19 TX โ RX ะผะพะดัะปั
โ  GPIO4โโโโ MH-Z19 RX โ TX ะผะพะดัะปั (ัะตัะตะท ะดะตะปะธัะตะปั 5Vโ3.3V!)
โ  GPIO5โโโโ LED ะัะฐัะฝัะน (PWM)
โ  GPIO6โโโโ I2C SDA (BME280 + LCD)
โ  GPIO7โโโโ I2C SCL (BME280 + LCD)
โ  GPIO8โโโโ ะัััะพะตะฝะฝัะน RGB LED (WS2812)
โ GPIO18โโโ LED ะะตะปะตะฝัะน (PWM)
โ GPIO19โโโ LED ะกะธะฝะธะน (PWM)
โ GPIO20โโโ ะะพะดัะฒะตัะบะฐ LCD (PWM ัะตัะตะท ััะฐะฝะทะธััะพั)
โโโโโโโโโดโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### โ๏ธ ะะฐะถะฝัะต ะทะฐะผะตัะฐะฝะธั ะฟะพ ะฟะพะดะบะปััะตะฝะธั

#### ะะตะปะธัะตะปั ะดะปั MH-Z19 (TX ะผะพะดัะปั โ RX ะดะฐััะธะบะฐ)
```
ESP32 GPIO4 (3.3V) โโโโโฌโโโ 1ะบฮฉ โโโโโฌโโโ MH-Z19 RX
                       โ            โ
                       โ           2ะบฮฉ
                       โ            โ
                       โโโโโโโโโโโ GND
```

#### ะะพะดะบะปััะตะฝะธะต ัะพัะพัะตะทะธััะพัะฐ
```
3.3V โโโโโฌโโโ ะคะพัะพัะตะทะธััะพั โโโโโฌโโโ GPIO1 (ADC)
         โ                     โ
         โ                    10ะบฮฉ
         โ                     โ
         โโโโโโโโโโโโโโโโโโโโโโโดโโโ GND
```

#### ะะพะดัะฒะตัะบะฐ LCD (PWM)
```
GPIO20 โโโโ 1ะบฮฉ โโโโ ะะฐะทะฐ NPN (BC547/2N2222)
ะะพะปะปะตะบัะพั โโโโ ะะฐัะพะด ะฟะพะดัะฒะตัะบะธ (-)
ะญะผะธััะตั โโโโ GND
ะะฝะพะด ะฟะพะดัะฒะตัะบะธ (+) โโโโ 5V
```

#### ะะฝะพะฟะบะฐ
```
GPIO0 โโโโโฌโโโ ะะฝะพะฟะบะฐ โโโโ GND
          โโโโ 10ะบฮฉ โโโโ 3.3V (ะฟะพะดััะถะบะฐ)
```

#### RGB ัะฒะตัะพะดะธะพะด (ะะฑัะธะน ะบะฐัะพะด)
```
GPIO5 โโโโ 220ฮฉ โโโโ ะัะฐัะฝัะน ะฐะฝะพะด
GPIO18 โโโ 220ฮฉ โโโโ ะะตะปะตะฝัะน ะฐะฝะพะด
GPIO19 โโโ 220ฮฉ โโโโ ะกะธะฝะธะน ะฐะฝะพะด
ะะฑัะธะน ะบะฐัะพะด โโโโ GND
```


---

## ๐ ะฃััะฐะฝะพะฒะบะฐ ะธ ะฝะฐัััะพะนะบะฐ

### 1. ะฃััะฐะฝะพะฒะบะฐ ESPHome
ะงะตัะตะท Docker (ัะตะบะพะผะตะฝะดัะตััั):
```bash
docker run -d \
  --name=esphome \
  --restart=always \
  -v ./config:/config \
  -p 6052:6052 \
  -p 6123:6123 \
  --device=/dev/ttyUSB0 \
  ghcr.io/esphome/esphome:latest
```

### 2. ะคะฐะนะปั ะฟัะพะตะบัะฐ
ะกะพะทะดะฐะนัะต ะฒ ะฟะฐะฟะบะต ```config```:
```
config/
โโโ meteo-station.yaml    # ะัะฝะพะฒะฝะพะน ัะฐะนะป ะบะพะฝัะธะณััะฐัะธะธ
โโโ secrets.yaml          # ะกะตะบัะตัั (ะฟะฐัะพะปะธ, ะบะปััะธ)
```

### 3. ะะฐัััะพะนะบะฐ secrets.yaml
```yaml
# WiFi
wifi_ssid: "ะฒะฐัะฐ_ัะตัั"
wifi_password: "ะฒะฐั_ะฟะฐัะพะปั"
ap_password: "ะฟะฐัะพะปั_ัะพัะบะธ_ะดะพัััะฟะฐ"

# Home Assistant
api_encryption_key: "32_ัะธะผะฒะพะปะฐ_ะบะปัั_ัะณะตะฝะตัะธัะพะฒะฐัั_ะฒ_HA"
ota_password: "ะฟะฐัะพะปั_ะดะปั_ota"

# ะะตะฑ-ัะตัะฒะตั
web_server_password: "ะฟะฐัะพะปั_ะดะปั_ะฒะตะฑ_ะธะฝัะตััะตะนัะฐ"
```
### 4. ะะพะผะฟะธะปััะธั ะธ ะฟัะพัะธะฒะบะฐ
```bash
# ะงะตัะตะท ะฒะตะฑ-ะธะฝัะตััะตะนั ESPHome
# ะะปะธ ัะตัะตะท ะบะพะผะฐะฝะดะฝัั ัััะพะบั:
esphome compile meteo-station.yaml
esphome upload meteo-station.yaml
```
-- ะฏ ะดะตะปะฐะป ัะตัะตะท ะฒัะฑ-ะธะฝัะตััะตะนั ESPhome ะฟะพ USB, ะผะพะถะฝะพ ะฟะพัะพะผ ะพะฑะฝะพะฒะปััั ัะถะต ะฟะพ ะฒะพะทะดััั

## ๐ฑ ะะฝัะตะณัะฐัะธั ั Home Assistant
ะะพัะปะต ะฟะตัะฒะพะน ะทะฐะณััะทะบะธ ััััะพะนััะฒะพ ะฟะพัะฒะธััั ะฒ Home Assistant ะฐะฒัะพะผะฐัะธัะตัะบะธ. ะะพะฑะฐะฒััะต ะบะฐััะพัะบั ะฒ Lovelace:
```yaml
type: entities
title: ะะตัะตะพััะฐะฝัะธั
show_header_toggle: false
entities:
  - type: section
    label: ะะฐััะธะบะธ
  - entity: sensor.meteo_station_temperature
    name: ะขะตะผะฟะตัะฐัััะฐ
  - entity: sensor.meteo_station_humidity
    name: ะะปะฐะถะฝะพััั
  - entity: sensor.meteo_station_pressure
    name: ะะฐะฒะปะตะฝะธะต
  - entity: sensor.meteo_station_co2
    name: COโ
  - entity: sensor.meteo_station_illuminance
    name: ะัะฒะตัะตะฝะฝะพััั
    
  - type: section
    label: ะฃะฟัะฐะฒะปะตะฝะธะต
  - entity: select.meteo_station_display_mode
    name: ะะตะถะธะผ ัะบัะฐะฝะฐ
  - entity: select.meteo_station_led_mode_select
    name: ะะตะถะธะผ ะธะฝะดะธะบะฐัะพัะฐ
  - entity: select.meteo_station_led_source
    name: ะััะพัะฝะธะบ ะธะฝะดะธะบะฐัะพัะฐ
  - entity: number.meteo_station_lcd_brightness
    name: ะฏัะบะพััั ัะบัะฐะฝะฐ
  - entity: number.meteo_station_led_brightness
    name: ะฏัะบะพััั ะธะฝะดะธะบะฐัะพัะฐ
  - entity: switch.meteo_station_auto_brightness
    name: ะะฒัะพััะบะพััั
```

## ๐ฎ ะฃะฟัะฐะฒะปะตะฝะธะต
ะคะธะทะธัะตัะบะฐั ะบะฝะพะฟะบะฐ
ะะดะธะฝะฐัะฝะพะต ะฝะฐะถะฐัะธะต โ ะฟะตัะตะบะปััะตะฝะธะต ัะตะถะธะผะพะฒ ัะบัะฐะฝะฐ

Home Assistant
ะัะต ะฝะฐัััะพะนะบะธ ะดะพัััะฟะฝั ัะตัะตะท ะธะฝัะตััะตะนั HA ะธ ะผะพะณัั ะฑััั ะธัะฟะพะปัะทะพะฒะฐะฝั ะฒ ะฐะฒัะพะผะฐัะธะทะฐัะธัั.
<img width="1129" height="1256" alt="image" src="https://github.com/user-attachments/assets/1359e5b5-d523-4f16-a4b7-7b2394ba7f2f" />


ะขะฐะบะถะต ะดะพัััะฟะฝั ัะตัะตะท ะฒัะฑ-ะธะฝัะตััะตะนั:
<img width="1656" height="1058" alt="image" src="https://github.com/user-attachments/assets/504addd3-05b2-4225-9e28-eaf6061854e1" />

## ๐๏ธ ะะฐัััะพะนะบะฐ ะฟะพะด ัะตะฑั

ะงะฐัะพะฒะพะน ะฟะพัั
ะ ัะฐะนะปะต ```meteo-station.yaml``` ะธะทะผะตะฝะธัะต ```timezone```:
```yaml
time:
  - platform: homeassistant
    id: ha_time
    timezone: Europe/Moscow  # ะฒะฐั ัะฐัะพะฒะพะน ะฟะพัั
```

ะัััะบะธะต ะฑัะบะฒั
ะัะต ัะธะผะฒะพะปั ะทะฐะณััะถะฐัััั ัะตัะตะท ```user_characters```. ะัะปะธ ะฝัะถะฝั ะดะพะฟะพะปะฝะธัะตะปัะฝัะต ะฑัะบะฒั โ ะดะพะฑะฐะฒััะต ะธั (ะผะฐะบัะธะผัะผ 20 ัะธะผะฒะพะปะพะฒ, ะฝะพ ะพะดะฝะพะฒัะตะผะตะฝะฝะพ ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั ัะพะปัะบะพ 8, ะพััะฐะปัะฝัะต โ ะทะตัะบะฐะปะฐ).

---
## โ๏ธ ะะพะทะผะพะถะฝัะต ะฟัะพะฑะปะตะผั ะธ ะธั ัะตัะตะฝะธะต
|ะัะพะฑะปะตะผะฐ |	ะะตัะตะฝะธะต|
|-----------|------------|
|ะฃัััะพะนััะฒะพ ะฟะตัะตะทะฐะณััะถะฐะตััั ะฒ ัะธะบะปะต |	ะัะพะฒะตัััะต ะฟะธัะฐะฝะธะต 3.3V, ะพัะบะปััะธัะต ะฟะตัะธัะตัะธั|
|ะะต ัะฐะฑะพัะฐะตั API ะฒ HA |	ะัะพะฒะตัััะต ะบะปัั ัะธััะพะฒะฐะฝะธั ะฒ secrets.yaml ะธ HA|
|ะะตะฟัะฐะฒะธะปัะฝัะต ัะฒะตัะฐ ะฝะฐ ะฒัััะพะตะฝะฝะพะผ LED |	ะะทะผะตะฝะธัะต rgb_order: GRB ะฝะฐ RGB/BRG/RBG|
|MH-Z19 ะฝะต ะพัะฒะตัะฐะตั |	ะัะพะฒะตัััะต ะดะตะปะธัะตะปั ะฝะฐะฟััะถะตะฝะธั ะธ ะฟะธัะฐะฝะธะต 5V|
|ะะธัะฟะปะตะน ะฝะต ะธะฝะธัะธะฐะปะธะทะธััะตััั |	ะัะพะฒะตัััะต ะฐะดัะตั 0x27/0x3F, ะดะพะฑะฐะฒััะต ะฟัะพะฒะตัะบั is_ready()|

## โญ ะัะปะธ ะฟัะพะตะบั ะพะบะฐะทะฐะปัั ะฟะพะปะตะทะฝัะผ, ะฟะพััะฐะฒััะต ะทะฒะตะทะดั ะฝะฐ GitHub!

ะก ะฟะพะผะพััั Deep Seek ะบะพะฝะฒะตััะธัะพะฒะฐะป ะฒะตััะธั ะพั https://github.com/Norovl/meteoClock

ะะฝะพะณะพ  ะดะพัะฐะฑะพัะพะบ, ัะฑัะฐะป ััะฐะฝะตะฝะธะต ะณัะฐัะธะบะพะฒ, ะฝะฐัััะพะนะบะธ. ะัั ัะตะฟะตัั ััะฐะฝะธััั ะฒ HomeAssistant ะธ ะฝะฐ ะฒะตะฑะผะพัะดะต.

ะัะพัะธะฒะบั ะฟัะพะฒะตััะป ะฝะฐ esp32-wroom1-c6. ะัะพะฑะพะฒะฐะป ัะดะตะปะฐัั zigbee - ะฝะพ ััะฐ ะทะฐะดะฐัะฐ ะพะบะฐะทะฐะปะฐัั ะฝะตััะธะฒะธะฐะปัะฝะพะน ะธะท-ะทะฐ ะฟะปะพัะพะน ะฟะพะดะดะตัะถะบะธ ะฒ ESPhome. ะะฐัะพ Wi-Fi ะฒะตััะธั ะพัะปะธัะฝะพ ัะฐะฑะพัะฐะตั.

ะัะถะฝะพ ะดะพะฟะพะปะฝะธัั ะธะฝััััะบัะธัะผะธ...
